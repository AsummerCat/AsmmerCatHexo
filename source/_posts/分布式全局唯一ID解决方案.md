---
title: 分布式全局唯一ID解决方案
date: 2020-05-22 14:17:40
tags: [分布式ID,雪花算法,java]
---

# 分布式全局唯一ID解决方案

## 一步步迭代


### 单机可使用
1. 使用UUID (基础版本)  
优点:使用便捷  
缺点:无序,增加索引查找压力 
2. 数据库自增  
 优点:使用便捷  
缺点:可被暴力破解 根据ID 1 2 3 ;水平扩展不方便 

### 集群可用
1. 使用redis实现   
优点:高可用  
缺点:需要独立部署,维护麻烦  

==推荐方案: 一个集群中有5台redis,可用初始化每台Redis的值分别为1,2,3,4,5,然后步长都是5.==
6台以上可能有BUG(重复)

<!--more-->

```
生成:
A: 1,6,11,16,21
B: 2,7,12,17,22
C: 3,8,13,18,23
D: 4,9,14,19,24
E: 5,10,15,20,25
```

2. Twitter的雪花算法(sonw flake)
 使用年限: 70年 大致就是1970-2039年
优点:
- 生成64bit大小的整数,为一个Long类型(转换为字符串后长度最多19)
- 分布式系统内部会产生ID碰撞,并且效率较高

缺点:
- 依赖机器时钟,如果机器时钟回拨,会导致重复ID生成




3. 根据雪花算法改进的其他算法(解决了时钟回拨问题)

```
百度的唯一ID生成器 : UidGenerator
每天的分布式ID生成系统: Leaf
  
```