---
title: 高并发下的处理方案简单介绍
date: 2019-04-01 20:08:13
tags: [java,linux]
---

# 高并发下的处理方案 (简单介绍)

## QPS达到100 (DB极限) 个人网站 

优化后可达到(200-700)

假设数据库的请求现在0.01秒内完成

假设只有一个sql查询,那么100QPS 意味着 1秒钟完成100次请求,但是我们并不能保证数据查询能保证完成100次

<font color="red">方案:</font>数据库缓存,二级缓存,数据库负载均衡

## QPS达到800 (带宽极限)

假设我们使用的百兆带宽 意味着网站出口的实际带宽 为 8M/S左右

假设每个页面只有10k 在这个并发情况下,百兆宽带已经全部吃完了

图片最吃带宽 ->图片服务器

动态资源和静态资源->动静分离

<font color="red">方案:</font>CDN加速,负载均衡,页面压缩



<!--more-->

## QPS达到1000 (内网宽带极限+redis极限)

Mecache 一个缓存工具 并发2w左右

redis  非关系型数据库

| 缓存服务器 | 第一次（缓存对象1KB） | 第二次(缓存对象10KB) | 第二次（缓存对象100KB） |
| ---------- | --------------------- | -------------------- | ----------------------- |
| memcache   | 25783次/秒            | 20893次/秒           | 9676次/秒               |
| redis      | 39991次/秒            | 18735次/秒           | 2794次/秒               |
| tair       | 15432次/秒            | 13723次/秒           | 3214次/秒               |



redis 并发5w左右 mecache并发10w左右 (别人预估)

在此之前可能内网带宽 已经消耗完毕,表现出不稳定

<font color="red">方案:</font>静态HTML缓存

## QPS达到2000 (锁模式极限)

这个级别下 文件系统访问锁都变成灾难

<font color="red">方案:</font> 做业务分离,分布式存储

